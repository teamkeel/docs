# Authentication

In order for users to securely interact with your application, they will need to be _authenticated_.  Keel provides rich support for seamlessly integrating with third-party authentication providers, such as Google, Facebook and GitHub.  

We currently support two flows of authenticating with third-party providers.

 - [**SSO Login:**](/authentication/sso-login-auth) *Done for you.* Use this flow if you want Keel to perform the complicated handshake with your preferred provider. This flow will work with all OAuth2-compatible providers.

 - [**OIDC Tokens:**](/authentication/oidc-token-auth) *Bring your own.*  Use this flow if you have already built the authenticatation steps with your preferred provider (probably using Authorization Code Flow) and you have an ID Token.

These flows are both enabled by default. All you need to do is configure your providers. 

## Supported Providers

You can configure **any OAuth2.0 authentication provider** to work with Keel, however we have already preconfigured some of the popular providers for you.  

Not all providers are supported with the OIDC Token flow; only OpenID Connect compliant providers will work, which fortunately still does cover most the of the popular options.

The table below lists the providers we support out of the box, however **you can configure any OAuth2.0 provider you want** using the `oauth` and `oidc` provider types.

| Provider        | Type       | SSO Login | OIDC Token | Additional properties |
|-----------------|------------|----------|------------|-----------------------|
| Google          | `google`   | ✅        | ✅          |                       |
| Facebook        | `facebook` | ✅        | ✅          |                       |
| Gitlab          | `gitlab`   | ✅        | ✅          |                       |
| GitHub          | `github`   | ✅        |            |                       |
| Microsoft Azure | `azure`    | ✅        | ✅          | `issuerUrl`           |
| Auth0           | `auth0`    | ✅        | ✅          | `issuerUrl`           |
| _Custom OIDC_   | `oidc`     | ✅        | ✅          |                       |
| _Custom OAuth2_ | `oauth`    | ✅        |            |                       |

## Getting Started

### Configuration

It's really simple. Authentication providers are all configured in your `keelconfig.yaml` file.  For example, let's enable Google:

```yaml filename="keelconfig.yaml"
auth:
  providers:
    - type: google
      name: 'Google Example Client'
      clientId: {{clientId}}
```

If you would like to configure your own custom provider, please read the authentication configuration page for more.  TODO

### Setup the client with your provider

You will also need to setup the client with each of the third-party providers you have configured.  Once you've set up the client, you will be provided with the following:
 - Client ID:  An identifier for your app.  This needs to be configured in your `keelconfig.yaml` as shown in the example configuration above.
 - Client secret:  Your app's password and should always be kept a secret.  See the next section for more.  

import { Callout } from "nextra/components";

<Callout type="info">
  If you only intend to use OIDC Token authentication, then you can ignore the client secret. It is only necessary for SSO Login. 
</Callout>

### Configure the client secret on your host

If you plan to use the SSO Login flow, then you will need to configure the client secret on every host on which your Keel app will run.  

Secrets for authentication providers follow this pattern: `KEEL_AUTH_{{provider name}}_SECRET` where `{{provider name}} is a upper-snake-cased provider name.  In our case, it will be `KEEL_AUTH_GOOGLE_EXAMPLE_CLIENT_SECRET`.

If on local, DO THIS, if on Console, DO THIS.  TODO SECTION!

## Authentication

Now that you configured, the next step is to authenticate using one of our flows:

 * [OIDC Token flow](/authentication/oidc-token-auth)
 * [SSO Login flow](/authentication/sso-login-auth)
