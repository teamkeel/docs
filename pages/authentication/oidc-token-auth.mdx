# OIDC Token Authentication

With OIDC Token authentication, we are able to securely authenticate a user with just an ID token from a third-party provider.  With this flow we do not perform the authentication steps with the provider.  For example, if you're authenticating with Google, then you'll most like implement the [Authorization Code Flow](https://developers.google.com/identity/protocols/oauth2/javascript-implicit-flow) to sign the user in.  You will need to build this into your application. 

These are the general steps:

 1. Perform the relevant authentication flow with your provider
 2. Extract `id_token` from the successful auth respoonse
 3. Perform â€œtoken exchangeâ€ with our `/auth/token` endpoint to authenticate
 4. Use access and refresh tokens to query your Keel API


import { Callout } from "nextra/components";

<Callout type="info" emoji="ğŸ™Œ">
  An ID token is an artifact that proves that a user has been authenticated. It was introduced by OpenID Connect (OIDC), an open standard for authentication used by many identity providers such as Google, Facebook, and, Auth0.
</Callout>

For OpenID Connect-compatible providers, the ID token will normally be returned from the provider's token endpoint.  For example, this is the response from Auth0's token endpoint after successfully authenticating:

```json
{
	"access_token": "{{access_token}}",
	"id_token": "{{id_token}}",
	"scope": "openid profile email address phone",
	"expires_in": 86400,
	"token_type": "Bearer"
}
```

If an ID token is not returned with your providers token endpoint, then you might need to request it by providing the scope value `openid`.

Once you have obtained the ID token, you can use it to gain access to your Keel app.  

import { Tab, Tabs } from â€˜nextra-theme-docsâ€™
<Tabs items={[â€˜cURLâ€™, â€˜Node.JSâ€™, â€˜GraphQL queryâ€™]}>
  <Tab>
```bash
curl --request POST \
  --url â€˜https://{yourDomain}/auth/tokenâ€™ \
  --header â€˜content-type: application/x-www-form-urlencodedâ€™ \
  --data grant_type=token_exchange \
  --data subject_token=ID_TOKEN
```
  </Tab>
  <Tab>
```js
var axios = require(â€œaxiosâ€).default;
var options = {
  method: â€˜POSTâ€™,
  url: â€˜https://{yourDomain}/oauth/tokenâ€™,
  headers: {â€˜content-typeâ€™: â€˜application/x-www-form-urlencodedâ€™},
  data: new URLSearchParams({
    grant_type: â€˜client_credentialsâ€™,
    client_id: â€˜YOUR_CLIENT_IDâ€™,
    client_secret: â€˜YOUR_CLIENT_SECRETâ€™,
    audience: â€˜YOUR_API_IDENTIFIERâ€™
  })
};
axios.request(options).then(function (response) {
  console.log(response.data);
}).catch(function (error) {
  console.error(error);
});
```
  </Tab>
</Tabs>

If you are successfully authenticated, the token endpoint has a standard `application/json` response.

```json filename=â€œHTTP 200"
{
  â€œaccess_tokenâ€: â€œeyJhbGciOiJSUzI...â€œ,
  â€œtoken_typeâ€: â€œBearerâ€,
  â€œexpires_inâ€: 86400,
  â€œrefresh_tokenâ€: â€œTvngQKPYcCXsuCp...â€
}
```
